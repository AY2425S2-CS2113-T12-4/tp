@startuml
hide circle
skinparam classAttributeIconSize 0
hide footbox

participant ":CheckBudgetCommand" as CBC
participant ":BudgetManager" as BM
participant ":Budget" as B
participant ":Ui" as UI

CBC -> BM: checkBudget(category)
activate BM

alt category is empty or blank
    BM -> BM: budgets.get("Overall")
    activate BM
    note right of BM: Retrieve Overall budget
    deactivate BM

    BM -> B: getLimit()
    activate B
    B --> BM: totalBudget
    deactivate B

    BM -> B: getTotalExpenses()
    activate B
    B --> BM: spent
    deactivate B

    BM -> UI: printCheckBudget("", totalBudget, spent, remaining)
    activate UI
    UI --> BM
    deactivate UI

else category provided
    alt category does not exist
        BM -> UI: printBudgetNotFound(category)
        activate UI
        UI --> BM
        deactivate UI
        deactivate BM
        return
    else category exists
        BM -> BM: budgets.get(category)
        activate BM
        note right of BM: Retrieve category budget
        deactivate BM

        BM -> B: getLimit()
        activate B
        B --> BM: totalBudget
        deactivate B

        BM -> B: getTotalExpenses()
        activate B
        B --> BM: spent
        deactivate B

        BM -> UI: printCheckBudget(category, totalBudget, spent, remaining)
        activate UI
        UI --> BM
        deactivate UI
    end
end

BM --> CBC
deactivate BM
@enduml